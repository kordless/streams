<scriptdef name="xxxpost" language="javascript"
           uri="http://lucidworks.com/fusion">
  <!--
     Thoughts:
       - assume ${fusion.*} properties?
         Or pass in somehow per invocation?
  -->
  <attribute name="endpoint"/>
  <attribute name="file"/>

  <classpath>
    <fileset dir="/Users/erikhatcher/lucid/rules/build/distributions/rules-d6a9e71-MODIFIED"
             includes="**/*.jar"/>
  </classpath>
  <![CDATA[
    self.log("Endpoint: " + attributes.get("endpoint"));
    self.log("File: " + attributes.get("file"));
    self.log("Body: " + self.text);
  ]]>
</scriptdef>


<target name="scratch">


  <get src="http://localhost:8764/api/roles"
       dest="roles.json"
       username="${fusion.username}"
       password="${fusion.password}"/>

       <echo>Posting by CDATA...</echo>
       <fusion:post endpoint="/foo">
         <![CDATA[
           { some: "json" }
         ]]>
       </fusion:post>

</target>


function lookup(id) {
  $.ajax({
    headers: {
      "oauth_consumer_key": $('#consumer_key').val(),
      "oauth_nonce": "",
      "oauth_signature": "",
      "oauth_signature_method": "HMAC-SHA1",
      "oauth_timestamp": "",
      "oauth_token": "",
      "oauth_version": "1.0"
      //oauth_consumer_key="xvz1evFS4wEEPTGEFPHBog"
      //oauth_nonce="kYjzVBB8Y0ZFabxSWbWovY3uYSQ2pTgmZeNu2VS4cg"
      //oauth_signature="tnnArxj06cWHq44gCs1OSKk%2FjLY%3D"
      //oauth_signature_method="HMAC-SHA1"
      //oauth_timestamp="1318622958"
      //oauth_token="370773112-GmHxMAgYyLbNEtIKZeRNFsMKPR9EyMZeS9weJAEb"
      //oauth_version="1.0"
    },
    type: "GET", async: false, dataType: 'json',
    url: 'https://api.twitter.com/1.1/users/lookup.json',

    success: function (data) {
      $('#scratch').text(
        JSON.stringify(data)
      );
    },

    fail: function( xhr, status, errorThrown ) {
      $('#scratch').text(errorThrown);
    }
  });

}
